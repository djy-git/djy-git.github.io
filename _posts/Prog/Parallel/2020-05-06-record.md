---
title: Problem Solving Note
tags: Parallel
---

<!--more-->

# Speed-up from Base code
## 1. Read data and generate N-asset portfolios
### 1) Load daily return data

|    | GPU 1 (Base code) | GPU 1 (Naive) | GPU 2 (Naive) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Current        | 0.81s        | 0.04s        | 0.04s        | 1.00x        |
|**Accumulated**| 0.81s        | 0.04s        | 0.04s        | 1.00x        |

|    | GPU 1 (Base code) | GPU 1 (Optimized) | GPU 2 (Optimized) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Optimized        |         |         |         |         |
|**Accumulated**|         |         |         |         |

- **Optimization details**  



### 2) Select N-asset

|    | GPU 1 (Base code) | GPU 1 (Naive) | GPU 2 (Naive) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Current        | 0.00s        | 0.01s        | 0.01s        | 1.00x        |
|**Accumulated**| 0.81s        | 0.05s        | 0.05s        | 1.00x        |

|    | GPU 1 (Base code) | GPU 1 (Optimized) | GPU 2 (Optimized) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Optimized        |         |         |         |         |
|**Accumulated**|         |         |         |         |

- **Optimization details**  


### 3) Generate N-asset portfolio

|    | GPU 1 (Base code) | GPU 1 (Naive) | GPU 2 (Naive) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Current        | 0.06s        | 0.00s        | 0.00s        | 1.00x        |
|**Accumulated**| 0.87s        | 0.05s        | 0.05s        | 1.00x        |

|    | GPU 1 (Base code) | GPU 1 (Optimized) | GPU 2 (Optimized) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Optimized        |         |         |         |         |
|**Accumulated**|         |         |         |         |

- **Optimization details**  



## 2. Monte-Carlo Simulation
### 1) Generate random number generator states(`rng_states`)

|    | GPU 1 (Base code) | GPU 1 (Naive) | GPU 2 (Naive) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Current        | 1.94s        | 2.02s        | 2.09s        | 0.96x        |
|**Accumulated**| 2.81s        | 2.07s        | 2.14s        | 0.97x        |

|    | GPU 1 (Base code) | GPU 1 (Optimized) | GPU 2 (Optimized) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Optimized        |         |         |         |         |
|**Accumulated**|         |         |         |         |

- **Optimization details**  



### 2) Generate M-asset portfolios from N-asset portfolio with random sampling and compute measure and sort

|    | GPU 1 (Base code) | GPU 1 (Naive) | GPU 2 (Naive) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Current        | 1.60s        | 2.07s        | 1.45s        | 1.43x        |
|**Accumulated**| 4.42s        | 4.14s        | 3.59s        | 1.15x        |

|    | GPU 1 (Base code) | GPU 1 (Optimized) | GPU 2 (Optimized) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Optimized        |         |         |         |         |
|**Accumulated**|         |         |         |         |

- **Optimization details**  
1. **Generate**  
Base: 0.4s  
Naive1: 0.4s
2. **Compute measure**  
Base: 1.0s  
Naive1: 1.3s
2.1 **Compute exp**  
&emsp;&nbsp;&nbsp; Base: 0.22s  
&emsp;&nbsp;&nbsp; Naive1: 0.28s
3. **Sort**  
Base: 0.16s  
Naive1: 0.16s



### 3) Select top portfolios by measure

|    | GPU 1 (Base code) | GPU 1 (Naive) | GPU 2 (Naive) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Current        | 0.00s        | 0.00s        | 0.00s        | 1.00x        |
|**Accumulated**| 4.42s        | 4.14s        | 3.59s        | 1.15x        |

|    | GPU 1 (Base code) | GPU 1 (Optimized) | GPU 2 (Optimized) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Optimized        |         |         |         |         |
|**Accumulated**|         |         |         |         |

- **Optimization details**  



## 3. Asset selection
### 1) Generate K-asset portfolios from M-asset portfolios with random sampling and compute measure and sort

|    | GPU 1 (Base code) | GPU 1 (Naive) | GPU 2 (Naive) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Current        | 1.88s        | 5.10s        | 4.26s        | 1.20x        |
|**Accumulated**| 6.30s        | 9.24s        | 7.85s        | 1.18x        |

|    | GPU 1 (Base code) | GPU 1 (Optimized) | GPU 2 (Optimized) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Optimized        |         |         |         |         |
|**Accumulated**|         |         |         |         |

- **Optimization details**  


### 2) Execute Parallel Genetic algorithm (10 generations)

|    | GPU 1 (Base code) | GPU 1 (Naive) | GPU 2 (Naive) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Current        | 20.93s        | 51.2s        | 26.49s        | 1.93x        |
|**Accumulated**| 27.27s        | 60.44s       | 34.34s        | 1.76x        |

|    | GPU 1 (Base code) | GPU 1 (Optimized) | GPU 2 (Optimized) | Acceleration ratio (GPU 2) |
|:--:|:--:|:--:|:--:|:--:|
|Optimized        |         |         |         |         |
|**Accumulated**|         |         |         |         |

- **Optimization details**  

